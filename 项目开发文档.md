# Sonic链二维码NFT项目开发文档

## 项目概述

**项目名称**: QR-NFT (二维码NFT平台)  
**链选择**: Sonic链 (10,000 TPS, 亚秒级确认)  
**核心功能**: 用户mint包含自定义内容的二维码NFT，可扫描查看内容

## 技术架构

### 1. 智能合约层
- **主合约**: QRCodeNFT.sol (ERC721标准)
- **代币合约**: QRToken.sol (ERC20标准，用于后续空投)
- **空投合约**: QRAirdrop.sol (空投分发逻辑)

### 2. 前端应用层
- **框架**: React + Next.js
- **Web3集成**: ethers.js + Wagmi
- **二维码生成**: qrcode.js
- **UI组件**: Tailwind CSS + Headless UI

### 3. 后端服务层
- **API服务**: Node.js + Express
- **数据库**: MongoDB (存储NFT元数据)
- **存储**: IPFS (去中心化存储)

## 核心功能设计

### 1. NFT铸造功能
```
mint(string content, string title, string description) -> tokenId
```
- 用户输入自定义内容
- 生成二维码图片
- 上传至IPFS
- 铸造NFT并关联元数据

### 2. 二维码生成与存储
- 前端生成二维码图片
- 将图片和元数据上传至IPFS
- 智能合约记录IPFS哈希

### 3. 查看与验证
- 扫描二维码获取tokenId
- 通过合约查询NFT详情
- 展示原始内容和NFT信息

### 4. 代币经济模型
- **QR代币**: 治理和激励代币
- **铸造费用**: 每次mint消耗少量S代币
- **持有者奖励**: 定期空投QR代币给NFT持有者

## 智能合约设计

### 1. QRCodeNFT合约功能
- ERC721标准NFT功能
- 自定义铸造逻辑
- 元数据管理
- 费用收集机制
- 批量操作支持

### 2. 安全考虑
- 重入攻击防护
- 权限控制(Owner/Minter角色)
- 输入验证和长度限制
- 支付安全检查

### 3. Gas优化
- 批量mint功能
- 状态变量优化
- 事件日志记录

## 开发阶段规划

### 阶段1: 智能合约开发 (已完成)
- [x] QRCodeNFT主合约 (针对Sonic链优化)
- [x] 完整测试用例编写
- [x] Sonic链部署脚本
- [x] 环境配置文件
- [x] 详细部署指南
- [x] 安全机制实现

### 阶段2: 前端开发
- [ ] React应用搭建
- [ ] Web3连接集成
- [ ] 二维码生成功能
- [ ] NFT展示界面

### 阶段3: 后端服务
- [ ] API服务开发
- [ ] IPFS集成
- [ ] 数据库设计
- [ ] 元数据管理

### 阶段4: 代币经济
- [ ] QR代币合约
- [ ] 空投机制设计
- [ ] 治理功能实现
- [ ] 激励模型优化

### 阶段5: 测试与部署
- [ ] 测试网部署
- [ ] 功能测试
- [ ] 安全审计
- [ ] 主网部署

## 合约接口设计

### QRCodeNFT主要接口
```solidity
// 铸造NFT
function mint(string memory content, string memory metadataURI) external payable returns (uint256);

// 批量铸造
function batchMint(string[] memory contents, string[] memory metadataURIs) external payable returns (uint256[] memory);

// 获取NFT内容
function getContent(uint256 tokenId) external view returns (string memory);

// 设置铸造费用
function setMintFee(uint256 fee) external onlyOwner;

// 提取收益
function withdraw() external onlyOwner;
```

## 经济模型设计

### 1. 费用结构
- **铸造费**: 0.01 S (可调整)
- **平台抽成**: 90%归开发者(Sonic Fee Monetization)
- **创作者收益**: 10%作为后续奖励池

### 2. 代币分配
- **QR代币总量**: 1,000,000,000 QR
- **空投分配**: 30% (300M QR)
- **开发团队**: 20% (200M QR)
- **生态基金**: 50% (500M QR)

### 3. 激励机制
- 持有NFT获得每日QR代币奖励
- 活跃用户额外奖励
- 社区治理参与奖励

## 风险控制

### 1. 技术风险
- 智能合约安全审计
- 前端安全防护
- 数据备份策略

### 2. 经济风险
- 代币价格波动控制
- 通胀机制设计
- 流动性管理

### 3. 合规风险
- NFT合规性审查
- 用户内容审核
- 法律风险评估

## 部署计划

### 测试网部署
- **网络**: Sonic Testnet
- **测试周期**: 2-4周
- **测试内容**: 功能测试、压力测试、安全测试

### 主网部署
- **预期时间**: 测试完成后1-2周
- **部署顺序**: 主合约 -> 代币合约 -> 空投合约
- **监控机制**: 实时监控合约状态和交易

## 预期里程碑

### 短期目标 (1个月)
- 完成智能合约开发和测试
- 部署到Sonic测试网
- 基础前端界面完成

### 中期目标 (3个月)
- 完整产品功能实现
- 主网部署和上线
- 用户增长至1000+

### 长期目标 (6个月)
- 代币经济模型完善
- 社区治理机制建立
- 生态系统扩展

---

*注: 此文档将随开发进展持续更新* 